<!DOCTYPE html>
<html lang="{{ site.LanguageCode | default "en" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if .IsHome }}{{ site.Title }} - {{ site.Params.description }}{{ else }}{{ .Title }} | {{ site.Title }}{{ end }}</title>

  <!-- Meta tags -->
  <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ site.Params.description }}{{ end }}">
  <meta name="author" content="{{ if .Params.author }}{{ $author := index site.Data.authors .Params.author }}{{ $author.name }}{{ else }}{{ site.Title }}{{ end }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ site.Params.description }}{{ end }}">
  <meta property="og:site_name" content="{{ site.Title }}">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="{{ .Permalink }}">
  <meta property="twitter:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta property="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ site.Params.description }}{{ end }}">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <!-- RSS -->
  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
  {{ end -}}

  <!-- Styles -->
  <style>
    :root {
      /* Typography */
      --font-family-serif: "Georgia", "Times New Roman", serif;
      --font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --font-family-mono: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;

      /* Colors - Light mode (default) */
      --color-primary: #ff6719;
      --color-primary-hover: #e55a17;
      --color-text: #242424;
      --color-text-secondary: #6b6b6b;
      --color-text-light: #8b8b8b;
      --color-bg: #ffffff;
      --color-bg-secondary: #f8f8f8;
      --color-border: #e6e6e6;
      --color-border-light: #f0f0f0;
      --color-featured-bg: #f8f8f8;
      --color-featured-border: #e6e6e6;

      /* Layout */
      --max-width: 680px;
      --container-padding: 20px;
      --header-height: 80px;

      /* Typography scale */
      --font-size-base: 18px;
      --font-size-sm: 14px;
      --font-size-xs: 13px;
      --line-height-base: 1.6;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-bold: 700;
    }

    /* Dark mode */
    [data-theme="dark"] {
      --color-primary: #ff6719;
      --color-primary-hover: #ff7a33;
      --color-text: #ffffff;
      --color-text-secondary: #b4b4b4;
      --color-text-light: #8b8b8b;
      --color-bg: #0a0b0d;
      --color-bg-secondary: #1a1b1e;
      --color-border: #2a2b2e;
      --color-border-light: #1f2023;
      --color-featured-bg: #1a1b1e;
      --color-featured-border: #2a2b2e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: var(--font-size-base);
      scroll-behavior: smooth;
      transition: color-scheme 0.3s ease;
    }

    body {
      font-family: var(--font-family-sans);
      background-color: var(--color-bg);
      color: var(--color-text);
      line-height: var(--line-height-base);
      font-weight: var(--font-weight-normal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Layout */
    .site-container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--container-padding);
    }

    /* Header */
    .site-header {
      border-bottom: 1px solid var(--color-border);
      background-color: var(--color-bg);
      position: sticky;
      top: 0;
      z-index: 100;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: var(--header-height);
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--container-padding);
    }

    .site-title {
      font-size: 20px;
      font-weight: var(--font-weight-bold);
      color: var(--color-text);
      text-decoration: none;
      letter-spacing: -0.01em;
      transition: color 0.3s ease;
    }

    .site-nav {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .nav-link {
      color: var(--color-text-secondary);
      text-decoration: none;
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
      transition: color 0.2s ease;
    }

    .nav-link:hover {
      color: var(--color-text);
    }

    .subscribe-btn {
      background-color: var(--color-primary);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: background-color 0.2s ease;
    }

    .subscribe-btn:hover {
      background-color: var(--color-primary-hover);
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: none;
      border: 1px solid var(--color-border);
      color: var(--color-text-secondary);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.2s ease;
    }

    .theme-toggle:hover {
      color: var(--color-text);
      border-color: var(--color-text);
    }

    /* Featured Post Styles */
    .featured-post {
      background-color: var(--color-featured-bg);
      border: 1px solid var(--color-featured-border);
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 48px;
      transition: all 0.3s ease;
    }

    .featured-post:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-color: var(--color-primary);
    }

    [data-theme="dark"] .featured-post:hover {
      box-shadow: 0 8px 25px rgba(255, 103, 25, 0.15);
    }

    .featured-post .post-title {
      font-size: 28px;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 16px;
      color: var(--color-text);
    }

    .featured-post .post-summary {
      font-size: 18px;
      line-height: 1.6;
      color: var(--color-text-secondary);
      margin-bottom: 20px;
    }

    .featured-badge {
      display: inline-block;
      background-color: var(--color-primary);
      color: white;
      padding: 4px 12px;
      border-radius: 16px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    /* Main Content */
    .site-main {
      min-height: calc(100vh - var(--header-height) - 120px);
      padding: 40px 0;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-family-serif);
      font-weight: var(--font-weight-bold);
      line-height: 1.2;
      color: var(--color-text);
      margin-bottom: 16px;
    }

    h1 {
      font-size: 42px;
      line-height: 1.1;
      margin-bottom: 20px;
    }

    h2 {
      font-size: 28px;
      line-height: 1.15;
      margin-top: 40px;
    }

    h3 {
      font-size: 22px;
      line-height: 1.2;
      margin-top: 32px;
    }

    h4 {
      font-size: 18px;
      margin-top: 24px;
    }

    p {
      margin-bottom: 20px;
      color: var(--color-text);
      line-height: 1.7;
    }

    a {
      color: var(--color-text);
      text-decoration: underline;
      text-decoration-color: var(--color-border);
      text-underline-offset: 2px;
      transition: text-decoration-color 0.2s ease;
    }

    a:hover {
      text-decoration-color: var(--color-text);
    }

    /* Code */
    code {
      font-family: var(--font-family-mono);
      background-color: var(--color-bg-secondary);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: var(--font-size-sm);
    }

    pre {
      background-color: var(--color-bg-secondary);
      padding: 20px;
      border-radius: 6px;
      overflow-x: auto;
      margin: 24px 0;
      border: 1px solid var(--color-border);
    }

    pre code {
      background: none;
      padding: 0;
    }

    /* Lists */
    ul, ol {
      margin: 20px 0;
      padding-left: 24px;
    }

    li {
      margin-bottom: 8px;
    }

    /* Images */
    img {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
      margin: 24px 0;
    }

    /* Footer */
    .site-footer {
      border-top: 1px solid var(--color-border);
      padding: 40px 0;
      text-align: center;
      color: var(--color-text-secondary);
      font-size: var(--font-size-sm);
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      :root {
        --container-padding: 16px;
        --header-height: 60px;
      }

      .site-nav {
        gap: 16px;
      }

      .nav-link {
        font-size: var(--font-size-xs);
      }

      .site-main {
        padding: 24px 0;
      }

      h1 { font-size: 32px; }
      h2 { font-size: 24px; margin-top: 32px; }
      h3 { font-size: 20px; margin-top: 24px; }
    }

    @media (max-width: 480px) {
      .site-nav {
        display: flex;
        justify-content: flex-end;
        align-items: center;
      }

      .site-nav .nav-link:not(.theme-toggle):not(.subscribe-btn) {
        display: none;
      }

      .theme-toggle {
        display: flex !important;
        align-items: center;
        justify-content: center;
      }
    }

    /* Utilities */
    .text-center { text-align: center; }
    .text-secondary { color: var(--color-text-secondary); }
    .text-light { color: var(--color-text-light); }
    .mb-0 { margin-bottom: 0; }
    .mt-0 { margin-top: 0; }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="site-header">
    <div class="header-content">
      <a href="{{ .Site.BaseURL }}" class="site-title">
        {{ .Site.Title }}
      </a>

      <nav class="site-nav">
        <a href="{{ .Site.BaseURL }}" class="nav-link">Home</a>
        <a href="/posts/" class="nav-link">Articles</a>
        <a href="/contributors/" class="nav-link">Contributors</a>
        <a href="/about/" class="nav-link">About</a>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
          <span id="theme-icon">🌙</span>
        </button>
        <a href="#subscribe" class="subscribe-btn">Subscribe</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="site-main">
    <div class="site-container">
      {{ block "main" . }}{{ end }}
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="site-container">
      <p>&copy; {{ now.Year }} {{ .Site.Title }}. All rights reserved.</p>
      <p style="margin-top: 8px;">
        Built with Hugo · Hosted on GitHub Pages
      </p>
    </div>
  </footer>

  <!-- Theme Toggle Script -->
  <script>
    // Theme toggle functionality
    (function() {
      const themeToggle = document.getElementById('theme-toggle');
      const themeIcon = document.getElementById('theme-icon');
      const html = document.documentElement;

            // Check for saved theme preference or default to light mode
      const currentTheme = localStorage.getItem('theme') || 'light';
      html.setAttribute('data-theme', currentTheme);

      // Update icon based on current theme
      function updateIcon(theme) {
        themeIcon.textContent = theme === 'dark' ? '☀️' : '🌙';
      }

      updateIcon(currentTheme);

      // Apply theme immediately on page load to prevent flash
      document.documentElement.setAttribute('data-theme', currentTheme);

      // Toggle theme
      themeToggle.addEventListener('click', function() {
        const currentTheme = html.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        html.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateIcon(newTheme);
      });
    })();
  </script>

  <!-- JavaScript Bundle -->
  <script src="{{ "js/main.js" | relURL }}"></script>
</body>
</html>
